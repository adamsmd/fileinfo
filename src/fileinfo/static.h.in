#ifndef FILEINFO_STATIC_H
#define FILEINFO_STATIC_H

#include <fileinfo/types.h>

#ifdef __cplusplus
extern "C" {
#endif

@DECLARE_FILEINFO_STAT@

struct fileinfo_struct {
  fileinfo_stat stat;
};

#define STAT_FIELDS_COUNT @STAT_FIELDS_COUNT@
static size_t const fileinfo_fields_length_static = STAT_FIELDS_COUNT;

#define STAT_FIELDS(F_INT,F_DEV,F_TIME_SEC,F_TIME_NSEC) @STAT_FIELDS@
#define sizeof_field(field) (sizeof(((fileinfo_stat*)NULL)->field))
#define INT(field,name) { offsetof(fileinfo_stat,field), sizeof_field(field), #name },
#define DEV(field,name,major,minor) INT(field,name)
#define TIME_SEC(field,name) INT(field,name)
#define TIME_NSEC(field,name) INT(field,name)
static fileinfo_field const fileinfo_fields_static[] = { /* TODO: put in ro memory */
  STAT_FIELDS(INT,DEV,TIME_SEC,TIME_NSEC)
};

#ifdef __cplusplus
}
#endif

#endif /* FILEINFO_STATIC_H */
